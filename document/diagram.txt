title EC Demo

actor User
boundary EC
control CDN-Server
database S3
database MongoDB

User->EC: Upload images, watermark, config
EC->CDN-Server:Create Config API (Watermark & config)
CDN-Server->S3: Store Watermark
CDN-Server->MongoDB: Store Watermark & config into DB
EC<--CDN-Server: ConfigID
loop
EC->S3: Upload origin files
EC<--S3: S3 Path
end
loop
EC->CDN-Server: Get /s/file_id.jpeg?config=
CDN-Server->S3: Get origin file
CDN-Server->MongoDB: Get config
CDN-Server->CDN-Server: Process images
EC<--CDN-Server: Target files
end
EC->EC: Zip
User<--EC: Download Zip
